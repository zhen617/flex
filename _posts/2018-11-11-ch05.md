---
layout: post
title: ch.05 Data Visualization
cover: ch05.jpg
date: 2018-11-10 3:36:00
categories: posts
---

* * *

- - -

# Data Analysis Process
**Server에서 누적된 데이터와 실시간으로 발생되는 데이터를 병합하여 처리**
* Python을 통해 데이터를 수집하고 String 연산, 정규표현식 등을 활용해 csv 파일로 정제
* 일반 Desktop에서 다루기 어려운 규모의 data는 linux server를 통해 data handling
![로그](https://t1.daumcdn.net/cfile/tistory/2516723754AA96312E)
![배치](https://t1.daumcdn.net/cfile/tistory/2320163754AA96321C)

---

- - -

# Confusion Matrix & F1-Measure
***정상이 99.95%이고 0.05%만 암에 걸린다고 했을 때, 모두를 정상인이라고 판단했을 때 정확도는?***
* 데이터 밸런식을 맞춰야 통계학적으로 설명력이 세진다

![매트릭스](data:image/png;base64,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)
* Precision = 정밀도. 예측한 p중 맞춘 p. P=TP/(TP+FP)
* Recall = 재현율. 민감도(Sensitivity)와 같음. 실제 P중 맞춘 P. R=TP/(TP+FN)
* F-Measure = 2*P*R/(P+R)
* Negative Predictive Value = 음성예측도. 예측한 n중 맞춘 n. NPV = TN/(FN+TN)
* Specificity = 특이도. 실제 n중 맞춘 n. S=TN/(FP+FN)
* Error rate = 오분류율. 모든 경우의 수 중에 틀린 것. E=(FP+FN)/ALL
* Accuray Rate = 정분류율. 정확도. 모든 경우의 수 중에 맞은 것. A=(TP+TN)/ALL
* TYPE 1 ERROR = P라고 예측했는데 실제는 N인것. 예측이 잘못된 것
* TYPE 2 ERROR = N이라고 예측했는데 실제는 P인것. 예측했어야 하는 것. 


- - -


* 데이터 밸런싱을 맞추기 위한 세가지 접근법

	1. 암환자의 데이터를 맞추는 것. 50:50의 밸런스를 맞춤 
	2. 99.95% 중 0.05%의 데이터를 선택해 사용.(정상인의 데이터 손실)
	3. 1번과 2번의 방법을 섞어서 사용

* 데이터 샘플링

  1. 소수집단에 대한 오버샘플링
  2. 다수집단에 대한 언더샘플링
  3. COST 함수 사용. Y가 소수집단일시 Y를 맞추면 +10점, 틀리면 -10점, X를 맞추면 +1점, 틀리면 -1점
  